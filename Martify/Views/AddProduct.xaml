<Window x:Class="Martify.Views.AddProduct"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
        xmlns:uc="clr-namespace:Martify.Views"
        xmlns:vm="clr-namespace:Martify.ViewModels"      
        xmlns:cv="clr-namespace:Martify.Converters"
        mc:Ignorable="d"
        Name="addProductWindow"
        Title="AddProduct" Height="525" Width="750"
        WindowStyle="None"
        Background="Transparent"
        AllowsTransparency="True"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanMinimize">

    <Window.DataContext>
        <vm:AddProductVM />
    </Window.DataContext>

    <Window.Resources>
        <Style x:Key="text" TargetType="TextBlock">
            <Setter Property="Foreground" Value="#363636" />
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="FontSize" Value="14" />
        </Style>

        <cv:ImagePathConverter x:Key="ImgConverter"/>

        <ControlTemplate x:Key="ErrorTemplate">
            <StackPanel>
                <AdornedElementPlaceholder x:Name="placeholder" />
                <TextBlock Text="{Binding [0].ErrorContent}" 
                           Foreground="Red" 
                           FontSize="10" 
                           Margin="0,2,0,0"
                           HorizontalAlignment="Left"
                           FontStyle="Italic"/>
            </StackPanel>
        </ControlTemplate>

        <Style x:Key="ValidatedTextBox" TargetType="TextBox" BasedOn="{StaticResource MaterialDesignOutlinedTextBox}">
            <Setter Property="Validation.ErrorTemplate" Value="{StaticResource ErrorTemplate}" />
        </Style>

        <Style x:Key="ValidatedComboBox" TargetType="ComboBox" BasedOn="{StaticResource MaterialDesignOutlinedComboBox}">
            <Setter Property="Validation.ErrorTemplate" Value="{StaticResource ErrorTemplate}" />
        </Style>

    </Window.Resources>

    <Grid>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="200"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Border Background="#2196F3" Padding="30" CornerRadius="25 25 25 25">
                <StackPanel VerticalAlignment="Center">
                    <Ellipse Width="150" Height="150" 
                             HorizontalAlignment="Center" 
                             VerticalAlignment="Top"
                             Margin="0,0,0,0">
                        <Ellipse.Fill>
                            <ImageBrush Stretch="UniformToFill">
                                <ImageBrush.ImageSource>
                                    <Binding Path="SelectedImagePath" 
                                             
                                             />
                                </ImageBrush.ImageSource>
                            </ImageBrush>
                        </Ellipse.Fill>
                    </Ellipse>

                    <Grid Width="150" Height="120"
                          VerticalAlignment="Center"
                          HorizontalAlignment="Center"
                          Margin="0,10,0,0">
                        <TextBlock FontSize="14" Margin="0,10,0,0" TextAlignment="Center" TextWrapping="Wrap"
                                   Foreground="White"
                                   Text="Nhấp vào nút dưới để chọn ảnh cho sản phẩm.">
                        </TextBlock>
                    </Grid>

                    <Grid Width="50" Height="50"
                          VerticalAlignment="Center"
                          HorizontalAlignment="Center"
                          Margin="0,20,0,0">
                        <Button Height="50" Width="50"
                                VerticalAlignment="Center"
                                HorizontalAlignment="Center"
                                materialDesign:ButtonAssist.CornerRadius="50"
                                Style="{StaticResource MaterialDesignRaisedButton}"
                                Command="{Binding SelectImageCommand}"
                                CommandParameter="{Binding ElementName=addProductWindow}" 
                                BorderBrush="{x:Null}" Foreground="{x:Null}">
                            <Button.Background>
                                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                    <GradientStop Color="#FFD3CECE"/>
                                    <GradientStop Color="#FFE8E8E8" Offset="1"/>
                                </LinearGradientBrush>
                            </Button.Background>
                        </Button>

                        <materialDesign:PackIcon Kind="ImagePlus" 
                                                 Width="30" Height="30" 
                                                 Foreground="#2196F3" 
                                                 VerticalAlignment="Center" 
                                                 HorizontalAlignment="Center" 
                                                 IsHitTestVisible="False"/>
                    </Grid>
                </StackPanel>
            </Border>

            <Border Grid.Column="1" Padding="20" Background="#ffffff" CornerRadius="25 25 25 25">
                <Grid>
                    <Grid HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0 0 0 0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="150"/>
                            <ColumnDefinition Width="250"/>
                        </Grid.ColumnDefinitions>

                        <Grid.RowDefinitions>
                            <RowDefinition Height="60"/>
                            <RowDefinition Height="60"/>
                            <RowDefinition Height="60"/>
                            <RowDefinition Height="60"/>
                            <RowDefinition Height="60"/>
                            <RowDefinition Height="60"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0" Text="Mã sản phẩm" Style="{StaticResource text}"/>
                        <TextBlock Grid.Row="1" Text="Tên sản phẩm" Style="{StaticResource text}"/>
                        <TextBlock Grid.Row="2" Text="Đơn vị tính" Style="{StaticResource text}"/>
                        <TextBlock Grid.Row="3" Text="Giá bán" Style="{StaticResource text}"/>
                        <TextBlock Grid.Row="4" Text="Danh mục" Style="{StaticResource text}"/>
                        <TextBlock Grid.Row="5" Text="Nhà cung cấp" Style="{StaticResource text}"/>


                        <Grid Grid.Column="1" Grid.Row="0">
                            <TextBox Height="40" VerticalAlignment="Center"
                                     Text="{Binding ProductCode, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                     materialDesign:HintAssist.Hint="SP001"
                                     materialDesign:HintAssist.IsFloating="False"
                                     Style="{StaticResource ValidatedTextBox}"
                                     Padding="10" FontSize="12" FontFamily="Times New Roman"/>
                        </Grid>

                        <Grid Grid.Column="1" Grid.Row="1">
                            <TextBox Height="40" VerticalAlignment="Center"
                                     Text="{Binding ProductName, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                     materialDesign:HintAssist.Hint="Sữa tươi tiệt trùng"
                                     materialDesign:HintAssist.IsFloating="False"
                                     Style="{StaticResource ValidatedTextBox}"
                                     Padding="10" FontSize="12" FontFamily="Times New Roman"/>
                        </Grid>

                        <Grid Grid.Column="1" Grid.Row="2">
                            <TextBox Height="40" VerticalAlignment="Center"
                                     Text="{Binding Unit, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                     materialDesign:HintAssist.Hint="Hộp/Lon/Gói"
                                     materialDesign:HintAssist.IsFloating="False"
                                     Style="{StaticResource ValidatedTextBox}"
                                     Padding="10" FontSize="12" FontFamily="Times New Roman"/>
                        </Grid>

                        <Grid Grid.Column="1" Grid.Row="3">
                            <TextBox Height="40" VerticalAlignment="Center"
                                     Text="{Binding Price, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True, StringFormat='N0'}"
                                     materialDesign:HintAssist.Hint="15000"
                                     materialDesign:HintAssist.IsFloating="False"
                                     Style="{StaticResource ValidatedTextBox}"
                                     Padding="10" FontSize="12" FontFamily="Times New Roman"/>
                        </Grid>

                        <Grid Grid.Column="1" Grid.Row="4">
                            <ComboBox Height="40" VerticalAlignment="Center"
                                      ItemsSource="{Binding CategoryList}"
                                      DisplayMemberPath="CategoryName"
                                      SelectedValuePath="CategoryID"
                                      SelectedValue="{Binding SelectedCategoryID, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                      materialDesign:HintAssist.Hint="Chọn Danh mục"
                                      materialDesign:HintAssist.IsFloating="False"
                                      Style="{StaticResource ValidatedComboBox}"
                                      Padding="10" FontSize="12" FontFamily="Times New Roman"/>
                        </Grid>

                        <Grid Grid.Column="1" Grid.Row="5">
                            <ComboBox Height="40" VerticalAlignment="Center"
                                      ItemsSource="{Binding SupplierList}"
                                      DisplayMemberPath="SupplierName"
                                      SelectedValuePath="SupplierID"
                                      SelectedValue="{Binding SelectedSupplierID, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                      materialDesign:HintAssist.Hint="Chọn Nhà cung cấp"
                                      materialDesign:HintAssist.IsFloating="False"
                                      Style="{StaticResource ValidatedComboBox}"
                                      Padding="10" FontSize="12" FontFamily="Times New Roman"/>
                        </Grid>

                        <Grid Grid.Column="1" Grid.Row="6">
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Bottom" Margin="0,15,0,0">
                                <Button Height="40" Width="110"
                                        Margin="0,0,10,0"
                                        materialDesign:ButtonAssist.CornerRadius="10"
                                        Style="{StaticResource MaterialDesignRaisedButton}" 
                                        Foreground="Black" BorderBrush="{x:Null}" IsDefault="False"
                                        Command="{Binding CloseCommand}"
                                        CommandParameter="{Binding ElementName=addProductWindow}">
                                    <Button.Background>
                                        <LinearGradientBrush StartPoint="0,0.2" EndPoint="1,0.8">
                                            <GradientStop Color="Black" Offset="1"/>
                                            <GradientStop Color="#FFE8E8E8" Offset="0"/>
                                            <GradientStop Color="#FFB9B9B9" Offset="0.996"/>
                                        </LinearGradientBrush>
                                    </Button.Background>
                                    <TextBlock Text="Hủy bỏ" FontFamily="Times New Roman" FontSize="14"/>
                                </Button>

                                <Button Height="40" Width="110"
                                        materialDesign:ButtonAssist.CornerRadius="10"
                                        Style="{StaticResource MaterialDesignRaisedButton}" 
                                        Foreground="White" BorderBrush="{x:Null}" IsDefault="True"
                                        Command="{Binding SaveCommand}"
                                        CommandParameter="{Binding ElementName=addProductWindow}">
                                    <Button.Background>
                                        <LinearGradientBrush StartPoint="0,0.2" EndPoint="1,0.8">
                                            <GradientStop Color="#FF2196F3" Offset="0.948"/>
                                            <GradientStop Color="#FF64B5F6" Offset="0.147"/>
                                            <GradientStop Color="#FF42A5F5" Offset="0.514"/>
                                        </LinearGradientBrush>
                                    </Button.Background>
                                    <TextBlock Text="Xác nhận" FontFamily="Times New Roman" FontSize="14"/>
                                </Button>
                            </StackPanel>
                        </Grid>
                    </Grid>
                </Grid>
            </Border>
        </Grid>

        <Grid x:Name="DragZone"
              Background="Transparent"
              Width="750" Height="50"
              VerticalAlignment="Top">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="MouseLeftButtonDown">
                    <i:InvokeCommandAction Command="{Binding DragWindowCommand}"
                                           CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Window}}" />
                </i:EventTrigger>
            </i:Interaction.Triggers>
        </Grid>
    </Grid>
</Window>