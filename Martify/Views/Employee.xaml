<UserControl x:Class="Martify.Views.Employee"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Martify.Views"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:vm="clr-namespace:Martify.ViewModels"
             
             xmlns:cv="clr-namespace:Martify.Converters" 
             
             mc:Ignorable="d" 
             d:DesignHeight="720" d:DesignWidth="864"
             Style="{StaticResource Page_RadarReveal_Style}"
             d:Style="{x:Null}">

    <UserControl.DataContext>
        <vm:EmployeeVM />
    </UserControl.DataContext>

    <UserControl.Resources>
        <cv:ImagePathConverter x:Key="ImgConverter"/>
        <cv:StatusConverter x:Key="StatusConverter"/>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="1.5*"/>
        </Grid.RowDefinitions>


        <Grid Grid.Row="0">
            <Button Width="150" Height="40"
                    materialDesign:ButtonAssist.CornerRadius="10"
                    Style="{StaticResource MaterialDesignRaisedButton}" 
                    Foreground="White" BorderBrush="{x:Null}"
                    Padding="0"
                    Command="{Binding AddEmployeeCommand}"
                    HorizontalAlignment="Right"
                    Margin="0,0,25,0">
                <Button.Background>
                    <LinearGradientBrush StartPoint="0,0.2" EndPoint="1,0.8">
                        <GradientStop Color="#FF86E5A0" Offset="0.948"/>
                        <GradientStop Color="#FF84E1A9" Offset="0.147"/>
                        <GradientStop Color="#FF66E7AF" Offset="0.514"/>
                    </LinearGradientBrush>
                </Button.Background>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                    <materialDesign:PackIcon Kind="AccountPlusOutline" Width="25" Height="25"
                                             HorizontalAlignment="Center"
                                             VerticalAlignment="Center"/>
                    <TextBlock Text="Thêm nhân viên" FontFamily="Times New Roman" FontSize="16"
                               Margin="5,0,0,0"
                               VerticalAlignment="Center"
                               HorizontalAlignment="Center"/>
                </StackPanel>
                
            </Button>
        </Grid>

        <Border Grid.Row="1"
                Background="White"
                CornerRadius="25"
                Margin="10">
            <DataGrid Margin="25,10,25,10"
                  ItemsSource="{Binding Employees}" 
                  RowStyle="{DynamicResource DataGridRowStyle}" 
                  ColumnHeaderStyle="{DynamicResource DataGridColumnHeaderStyle}" 
                  CellStyle="{DynamicResource DataGridCellStyle}" 
                  x:Name="membersDataGrid" 
                  Style="{DynamicResource DataGridStyle}"
                  AutoGenerateColumns="False"
                  HorizontalAlignment="Center"
                  CanUserReorderColumns="False"  
                  CanUserResizeColumns="False">

                <DataGrid.Columns>
                    <DataGridCheckBoxColumn Header="C" 
                                            CanUserSort="False"
                                            CanUserResize="False" 
                                            Width="auto" 
                                            ElementStyle="{DynamicResource DataGridCheckBoxStyle}">
                        <DataGridCheckBoxColumn.HeaderTemplate>
                            <DataTemplate>
                                <CheckBox Style="{DynamicResource DataGridCheckBoxStyle}"/>
                            </DataTemplate>
                        </DataGridCheckBoxColumn.HeaderTemplate>
                    </DataGridCheckBoxColumn>

                    <DataGridTextColumn Header="Mã" IsReadOnly="True" CanUserResize="False" Width="0.75*" Binding="{Binding EmployeeID}"/>

                    <DataGridTemplateColumn Header="Nhân viên" SortMemberPath="FullName" IsReadOnly="True" Width="1.6*">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <Ellipse Width="30" Height="30" Margin="0 0 10 0">
                                        <Ellipse.Fill>
                                            <ImageBrush Stretch="UniformToFill">
                                                <ImageBrush.ImageSource>
                                                    <Binding Path="ImagePath" 
                                                             Converter="{StaticResource ImgConverter}"
                                                             TargetNullValue="{StaticResource Anonymous}"
                                                             FallbackValue="{StaticResource Anonymous}"/>
                                                </ImageBrush.ImageSource>
                                            </ImageBrush>
                                        </Ellipse.Fill>
                                    </Ellipse>
                                    <TextBlock Text="{Binding FullName}" VerticalAlignment="Center"/>
                                </StackPanel>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                    <DataGridTextColumn Header="Địa chỉ" Binding="{Binding Address}" IsReadOnly="True" Width="1.25*"/>
                    <DataGridTextColumn Header="Ngày vào làm" Binding="{Binding HireDate, StringFormat=dd/MM/yyyy}" IsReadOnly="True" Width="1.25*"/>
                    <DataGridTextColumn Header="Trạng thái" 
                                        Binding="{Binding Status, Converter={StaticResource StatusConverter}}" 
                                        IsReadOnly="True" 
                                        Width="1.15*">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Status}" Value="True">
                                        <Setter Property="Foreground" Value="Green"/>
                                        <Setter Property="FontWeight" Value="SemiBold"/>
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding Status}" Value="False">
                                        <Setter Property="Foreground" Value="Red"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>

                    <DataGridTemplateColumn Header="Công cụ" 
                                            CanUserSort="False"
                                            Width="Auto" 
                                            CanUserReorder="False" 
                                            CanUserResize="False"
                                            IsReadOnly="True">

                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <Button Style="{DynamicResource GridEditButtonStyle}">
                                        <Image Source="{StaticResource CloseProgram}" Width="10" Height="10"></Image>
                                    </Button>
                                    <Button Margin="5 0 0 0" Style="{DynamicResource GridRemoveButtonStyle}">
                                        <Image Source="{StaticResource Martify}" Width="10" Height="10"></Image>
                                    </Button>
                                </StackPanel>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>

                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>
        </Border>
    </Grid>
</UserControl>